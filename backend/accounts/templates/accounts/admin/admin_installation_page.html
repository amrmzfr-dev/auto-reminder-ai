{% extends 'base.html' %}
{% load static %} {# Include if you use static files for images/icons #}

{% block title %}Create New Installation - Your App Name{% endblock %}

{% block content %}
{# The overall container for the page, setting a dark background #}
<div class="py-8 bg-[#171717] min-h-screen flex items-center justify-center">
    {# Form starts here #}
    <form method="post" enctype="multipart/form-data" novalidate class="w-full max-w-5xl">
        {% csrf_token %}

        {# Main form container: Dark background, rounded corners, shadow #}
        <div class="bg-[#171717] overflow-hidden">

            {# Header section with title and buttons #}
            <div class="px-6 md:px-8 flex flex-col sm:flex-row justify-between sm:items-center gap-4">
                <div>
                    <h2 class="text-xl font-bold text-white">New Installation & Customer Registration</h2>
                    <p class="text-md text-[#c0c0c0]">Enter details for the new installation and customer.</p>
                </div>
                <div class="flex items-center gap-x-3">
                    {# Changed the href to redirect back to the create installation page #}
                    {% if request.user.role == '1' %}
                        <a href="{% url 'installation_list' %}" ...>Cancel</a>
                    {% elif request.user.role == '2' %}
                        <a href="{% url 'installation_list' %}" ...>Cancel</a>
                    {% endif %}
                    
                </div>
            </div>

            {# Main content area for form fields #}
            <div class="p-6 md:p-8 flex flex-col gap-8">

                {% if form.non_field_errors %}
                    {# Error list styling for dark theme #}
                    <ul class="text-red-400 bg-red-900/20 p-4 rounded-md border border-red-700">
                        {% for error in form.non_field_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                {# Section container: dark background, border, rounded corners #}
                <div class="bg-[#1f1f1f] border border-[#2c2c2c] rounded-md">
                    <div class="p-6 border-b border-[#2c2c2c]">
                        {# Header text and icon for dark theme #}
                        <h3 class="text-base font-semibold text-white flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-[#c0c0c0]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h-4v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2H1m16 0h2a2 2 0 002-2v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2H1m16 0v1H1m4 0h2v1H5m10-1v1h-2v-1h2z" /></svg>
                            Customer Information
                        </h3>
                    </div>
                    <div class="p-6 space-y-6">
                        {# Includes form fields, assuming partials handle their own dark-theme styling for inputs/labels #}
                        {% include 'partials/_form_field.html' with field=form.customer_name %}
                        {% include 'partials/_form_field.html' with field=form.contact_person %}
                        {% include 'partials/_form_field.html' with field=form.customer_email %}
                        {% include 'partials/_form_field.html' with field=form.phone_number %}
                        {% include 'partials/_form_field.html' with field=form.address %}
                        {% include 'partials/_form_field.html' with field=form.city %}
                        {% include 'partials/_form_field.html' with field=form.state %}
                        {% include 'partials/_form_field.html' with field=form.house_type %}
                        {% include 'partials/_form_field.html' with field=form.postcode %}
                    </div>
                </div>

                {# Section container: dark background, border, rounded corners #}
                <div class="bg-[#1f1f1f] border border-[#2c2c2c] rounded-md">
                    <div class="p-6 border-b border-[#2c2c2c]">
                        {# Header text and icon for dark theme #}
                        <h3 class="text-base font-semibold text-white flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-[#c0c0c0]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" /></svg>
                            Installation Details
                        </h3>
                    </div>
                    <div class="p-6 space-y-6">
                        {# Includes form fields, assuming partials handle their own dark-theme styling for inputs/labels #}
                        {% include 'partials/_form_field.html' with field=form.charger_model %}
                        {% include 'partials/_form_field.html' with field=form.installer %}
                        {% include 'partials/_form_field.html' with field=form.notes %}
                    </div>
                    <div class="flex justify-end pr-4 pb-4">
                        <button type="submit" class="inline-flex items-center bg-[#006239] hover:bg-[#004e2c] text-sm text-white py-2 px-4 rounded-md transition duration-200 shadow-md">
                            Submit Installation
                        </button>
                    </div>
                </div>
            </div> {# End of main content area #}
        </div> {# End of bg-[#1f1f1f] container #}
    </form>
</div>

{% endblock content %}